# Camera Alarm Monitor (Tauri)

Desktop app to monitor and toggle Bosch camera virtual alarms (RCP) with auto-discovery.

## Development

- Dev run: `cargo tauri dev` (from `camera-monitor/src-tauri`)
- Release build: `cargo tauri build` (from `camera-monitor/src-tauri`)

## Auto-Updates (GitHub Releases)

This project uses the official Tauri updater:

- Update endpoint: `https://github.com/ATX92614/camera-monitor/releases/latest/download/latest.json`
- Updater artifacts/signatures are generated by `bundle.createUpdaterArtifacts` in `src-tauri/tauri.conf.json`.
- Releases are built/published by GitHub Actions: `.github/workflows/release.yml`.

### 1) Generate signing keys (once)

From `camera-monitor/src-tauri`:

```powershell
mkdir keys
cargo tauri signer generate -w keys\\updater.key
```

Keep `keys/updater.key` secret. The app ships with the public key in `src-tauri/tauri.conf.json`.

### 2) Add GitHub Secrets

In your GitHub repo settings → Secrets and variables → Actions, add:

- `TAURI_SIGNING_PRIVATE_KEY` = contents of `keys/updater.key`
- `TAURI_SIGNING_PRIVATE_KEY_PASSWORD` = the password used when generating the key (optional)

### 3) Create a release

1. Bump versions (keep them in sync):
   - `src-tauri/tauri.conf.json` → `version`
   - `src-tauri/Cargo.toml` → `package.version`
2. Push a tag, e.g.:

```powershell
git tag v0.1.1
git push origin v0.1.1
```

The workflow publishes a GitHub Release with installers + `latest.json` that the app can use to update.

